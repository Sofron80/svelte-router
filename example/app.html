<main>
  <RouterLink to="/">Home</RouterLink>
  <RouterLink to="/welcome">Welcome</RouterLink>
  <RouterLink to="/test/replace" replace>Replace</RouterLink>
  <RouterLink to="/hello/world">Dynamic Route</RouterLink>
  <div id="app"></div>
</main>

<script>
  import { Store } from 'svelte/store'
  import SvelteRouter from '../src'
  import Home from './pages/Home.html'
  import Welcome from './pages/Welcome.html'
  import Replace from './pages/Replace.html'
  import Hello from './pages/Hello.html'
  import NotFound from './pages/NotFound.html'

  const store = new Store({
    name: 'Everyone'
  })

  const router = new SvelteRouter({
    mode: 'hash',
    // mode: 'history',
    routes: {
      '/': Home,
      '/welcome': {
        Component: Welcome,
        props: {
          store
        }
      },
      '/test/replace': Replace,
      '/hello/:name': {
        Component: Hello,
        props: {
          data: {
            salutation: 'Hello'
          }
        },
      },
      default: NotFound
    }
  })
  SvelteRouter.listen(() => {
    console.log('router changed')
  })

  export default {
    oncreate () {
      router.create('#app')
    },

    ondestroy () {
      router.destroy()
    },

    components: {
      RouterLink: SvelteRouter.RouterLink
    }
  }
</script>

<style>
  :global(.router-link-active) {
    color: red;
  }
</style>
